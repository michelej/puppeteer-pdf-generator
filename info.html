<html lang="en">

<head>
    <title>PDF Generator API</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.39.2/lib/codemirror.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.39.2/lib/codemirror.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/codemirror@5.39.2/mode/xml/xml.min.js"></script>
    <style>
        /* Remove the navbar's default margin-bottom and rounded borders */
        
        .navbar {
            margin-bottom: 0;
            border-radius: 0;
        }
        
        .navbar-lm {
            background-color: #89bf04 !important;
        }
        
        .white {
            color: white !important;
            font-weight: bold;
            font-size: 26px;
            text-align: center;
        }
        
        .text-black {
            color: black !important;
            font-weight: bold;
        }
        
        .center {
            text-align: center;
        }
        
        .bg-info {
            background: #ebf7f0;
        }
        
        #htmlBody {
            width: 100%;
            height: 300px;
            resize: none;
        }
        
        #responseArea {
            width: 100%;
            height: 200px;
            resize: none;
        }
        
        .card-bg {
            background: #ebf7f0;
        }
        
        .post {
            background: #89bf04;
        }
        
        .heading {
            margin: 0;
            padding: 0;
        }
        
        .http-method {
            background: green;
            color: white;
            text-align: center;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-lm">
        <div class="container-fluid">
            <div class="navbar-header center">
                <a class="navbar-brand white" href="#">PDF Generator API</a>
            </div>
        </div>
    </nav>
    <section>
        <div class="container">
            <br>
            <h3>Documentation</h3>
            <p>Simple implementation of the library Puppeteer that allows to generate PDF from HTML code.</p>
            <a href="https://github.com/GoogleChrome/puppeteer">https://github.com/GoogleChrome/puppeteer</a>
            <hr>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="card card-bg">
                <div class="card-body">
                    <div class="row">
                        <div class="col col-lg-12">
                            <h4>Generate From HTML</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col col-lg-2">
                            <div class="alert alert-info http-method" role="alert">
                                <span><strong>POST</strong></span>
                            </div>
                        </div>
                        <div class="col col-lg-5">
                            <div class="alert alert-info" role="alert">
                                <span class="text-black">/LMEUtils/pdf/generateFromHTML</span>
                            </div>
                        </div>
                        <div class="col col-lg-5">
                            <div class="alert alert-info" role="alert">
                                <span>Converts an html page to the corresponding PDF</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="card">
                <div class="card-body card-bg">
                    <br>
                    <div class="row">
                        <div class="col-lg-8">
                            <h4 class="text-black">Request Headers</h4>
                            <table class="table">
                                <tr>
                                    <td class="text-center"><strong>Content-Type</strong></td>
                                    <td class="text-center">text/html</td>

                                </tr>
                                <tr>
                                    <td class="text-center"><strong>Accept</strong></td>
                                    <td class="text-center">application/pdf</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <!-- /row -->
                    <div class="row">
                        <div class="col-lg-12">
                            <h4 class="text-black">Body</h4>
                            <textarea id="htmlBody">
<!DOCTYPE html>
<html>
<body>
                            
<h2>HTML Tables</h2>
                            
<p>HTML tables start with a table tag.</p>
<p>Table rows start with a tr tag.</p>
<p>Table data start with a td tag.</p>
                            
<hr>
<h2>1 Column:</h2>
                            
<table>
<tr>
<td>100</td>
</tr>
</table>
                            
<hr>
<h2>1 Row and 3 Columns:</h2>
<table>
<tr>
<td>100</td>
<td>200</td>
<td>300</td>
</tr>
</table>
                            
<hr>
<h2>3 Rows and 3 Columns:</h2>
<table>
<tr>
<td>100</td>
<td>200</td>
<td>300</td>
</tr>
<tr>
<td>400</td>
<td>500</td>
<td>600</td>
</tr>
<tr>
<td>700</td>
<td>800</td>
<td>900</td>
</tr>
</table>
                            
<hr>
                            
</body>
</html>
                           
                    </textarea>
                        </div>
                    </div>
                    <br>
                    <!-- /row -->
                    <div class="row">
                        <div class="col-lg-12">
                            <button class="btn btn-success" id="testBtn">Try it out!</button>
                        </div>
                    </div>
                    <hr>
                    <!-- /row -->
                    <div class="row">
                        <div class="col-lg-8">
                            <h4 class="text-black">Response messages:</h4>
                            <table class="table">
                                <tr>
                                    <th class="text-center">HTTP Status Code</th>
                                    <th class="text-center">Reason</th>
                                </tr>
                                <tr>
                                    <td class="text-center">200</td>
                                    <td class="text-center">A PDF File is returned</td>
                                </tr>
                                <tr>
                                    <td class="text-center">400</td>
                                    <td class="text-center">Error - Something when wrong</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                </div>
                <!-- /row -->
            </div>
        </div>
    </section>
    <br>
    <footer></footer>
    <script type="text/javascript">
        $(document).ready(function() {
            var myCodeMirror = CodeMirror.fromTextArea($('#htmlBody')[0], {
                lineNumbers: true,
                mode: "text/html"
            });

            $("#testBtn").on('click', function() {
                $("#responseArea").val('');
                $.ajax({
                    url: '/LMEUtils/pdf/generateFromHTML',
                    method: 'POST',
                    data: myCodeMirror.getValue(),
                    headers: {
                        'Content-Type': 'text/html; charset=utf8',
                        'Accept': '*/*',
                    },
                    xhrFields: {
                        responseType: 'blob'
                    },
                    success: function(data) {
                        const blb = new Blob([data]);
                        if (window.navigator && window.navigator.msSaveOrOpenBlob) {
                            window.navigator.msSaveOrOpenBlob(blb, "PDF_test.pdf");
                        } else {
                            var a = window.document.createElement("a");
                            a.href = window.URL.createObjectURL(blb);

                            a.download = "PDF_test.pdf"
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                        }
                    },
                    error: function(xhr, ajaxOptions, thrownError) {
                        console.log(xhr)
                    }
                });
                return false;
            });
        });
    </script>
</body>

</html>